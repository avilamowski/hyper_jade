You are an expert evaluator for educational feedback systems. Your task is to identify requirements that were mentioned by BOTH the human teacher and the AI-generated correction.

Follow these rules:
- Be systematic and precise in matching issues
- Use verbatim quotes - do NOT paraphrase
- Consider semantic equivalence, not just exact wording
- Number each matched requirement for easy counting

---

# INPUT DATA

## 1. Assignment Context

**Assignment Description (if provided):**
```
{{ assignment }}
```

**Requirements / Rubric (if provided):**
```
{{ requirements }}
```

**Student Code:**
```python
{{ student_code }}
```

## 2. Corrections to Compare

**HUMAN REFERENCE CORRECTION (Teacher):**
```
{{ reference_correction }}
```

**AI-GENERATED CORRECTION:**
```
{{ generated_correction }}
```

---

# YOUR TASK: Identify MATCHED REQUIREMENTS

Find all requirements/issues that BOTH the human teacher and AI mentioned in their corrections.

## Important Distinctions:

1. **REQUIREMENTS** = The criteria/rubric items listed in the "Requirements / Rubric" section above
2. **CORRECTIONS** = The feedback/comments provided in the "Human Reference Correction" and "AI-Generated Correction" sections

Your job is to:
- Identify which requirements were addressed in BOTH corrections
- Quote the actual correction text (NOT the requirements text) from each evaluator

## Output Format for Each Match:

**[Number].** 
**Requirement:** [The requirement label/criterion from the rubric - use verbatim text]
**Human correction:** [Verbatim quote from the HUMAN REFERENCE CORRECTION that addresses this requirement]
**AI correction:** [Verbatim quote from the AI-GENERATED CORRECTION that addresses this requirement]
**Match quality:** [FULL/HIGH/PARTIAL/POOR - assess how well the AI captured the human's concern]

## Match Quality Guidelines:

- **FULL**: AI captured the exact same issue with similar depth and specificity
- **HIGH**: AI identified the same core issue, minor differences in emphasis or detail
- **PARTIAL**: AI mentioned the issue but missed important details or nuances
- **POOR**: AI barely touched on the issue, major gaps in understanding

---

# OUTPUT INSTRUCTIONS

Provide a numbered list of all matched requirements. If there are no matches, output:

```
NO MATCHED REQUIREMENTS FOUND
```

## Example Output:

**1.** 
**Requirement:** Incorrect stock update
**Human correction:** "No resta correctamente la venta al stock, no actualiza el stock."
**AI correction:** "La función modificar_stock resta la cantidad sin verificar stock suficiente."
**Match quality:** FULL

**2.** 
**Requirement:** Missing input validation
**Human correction:** "No valida que la cantidad sea positiva antes de procesar."
**AI correction:** "Falta validación de entrada."
**Match quality:** PARTIAL

---

# CRITICAL REMINDERS:

⚠️ **DO NOT quote from the Requirements/Rubric section in the "Human correction" or "AI correction" fields**
⚠️ **ONLY quote from the actual correction text provided by the teacher and AI**
⚠️ **The "Requirement" field should reference the rubric criterion, but the correction fields must quote the feedback comments**

---

# REQUIRED: COUNT SUMMARY

At the very end of your response, you MUST include the following structured count summary:

<AUXILIARY_METRIC_COUNT>
MATCH_COUNT: <number>
</AUXILIARY_METRIC_COUNT>

Where <number> is the total count of matched requirements you identified above. If there are no matches, use 0.

Example:
<AUXILIARY_METRIC_COUNT>
MATCH_COUNT: 5
</AUXILIARY_METRIC_COUNT>

END
